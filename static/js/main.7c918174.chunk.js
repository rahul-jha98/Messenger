(this["webpackJsonpmessenger-clone"]=this["webpackJsonpmessenger-clone"]||[]).push([[0],{111:function(e,t,a){e.exports=a(137)},120:function(e,t,a){},121:function(e,t,a){},133:function(e,t,a){},137:function(e,t,a){"use strict";a.r(t);var r=a(16),n=a(17),s=a(19),o=a(18),i=a(0),l=a.n(i),c=a(10),u=a.n(c),m=a(48),d=a(45),h=(a(120),a(121),a(180)),p=a(46),g=function(e){return l.a.createElement("div",{style:{width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"}},l.a.createElement(h.a,{color:"secondary"}),l.a.createElement("br",null),l.a.createElement(p.a,{variant:"body1"},e.message))},f=a(201),E=a(202),b=a(21),v=a(193),w=a(194),y=a(214),O=a(104),j=a(195),C=a(102),k=a(72),S=a.n(k),x=a(33),N=a.n(x),M=a(50),R=a(184),L=a(210),U=a(192),A=a(186),T=a(187),I=a(185),P=a(207),F=a(4),D=a(80),G=a.n(D),W=a(79),z=a.n(W);a(126),a(128),a(138);z.a.initializeApp({apiKey:"AIzaSyDGK-ZnwyHooQnl1HSM8zL4lJckmrHaSBo",authDomain:"messenger-clone-500a9.firebaseapp.com",databaseURL:"https://messenger-clone-500a9.firebaseio.com",projectId:"messenger-clone-500a9",storageBucket:"messenger-clone-500a9.appspot.com",messagingSenderId:"309370468657",appId:"1:309370468657:web:bea5db00e2f6454e4fd810",measurementId:"G-HH7ZZBB9HY"});var H=z.a,B=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(){var e;Object(r.a)(this,a);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).state={open:!1,name:"",description:"",nameError:"",descriptionError:"",groupsRef:H.database().ref("groups")},e.setOpen=function(t){e.setState({open:t})},e.resetErrors=Object(M.a)(N.a.mark((function t(){return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.setState({nameError:"",descriptionError:""});case 2:case"end":return t.stop()}}),t)}))),e.handleChange=function(t){return function(a){e.setState(Object(b.a)({},t,a.target.value))}},e.setMessage=function(t,a){e.setState(Object(b.a)({},t,a))},e.isFormValid=function(){var t=!0;return 0===e.state.name.length?(e.setMessage("nameError","Name of group cannot be empty"),t=!1):0===e.state.description.length&&(e.setMessage("descriptionError","Description cannot be empty"),t=!1),t},e.handleClickOpen=function(){e.props.closeDialog(),e.setOpen(!0)},e.handleSubmit=function(){e.resetErrors().then((function(){e.isFormValid()&&e.addChannel()}))},e.addChannel=function(){var t=e.state,a=t.groupsRef,r=t.name,n=t.description,s=a.push().key,o=e.props.currentUser,i={id:s,name:r,description:n,createdBy:{name:o.displayName,photoUrl:o.photoURL}};a.child(s).update(i).then((function(){e.setOpen(!1)}))},e.handleClose=function(t){return function(){1===t?e.handleSubmit():e.setOpen(!1)}},e}return Object(n.a)(a,[{key:"render",value:function(){var e=this.props.classes;return l.a.createElement("div",null,l.a.createElement(R.a,{"aria-label":"Create Group",onClick:this.handleClickOpen,startIcon:l.a.createElement(G.a,null),style:{paddingLeft:12,paddingRight:12}},"Create Group"),l.a.createElement(L.a,{open:this.state.open,style:{padding:10},"aria-labelledby":"responsive-dialog-title"},l.a.createElement(I.a,{id:"responsive-dialog-title"},"Create New Group"),l.a.createElement(A.a,null,l.a.createElement(T.a,null,"Enter details to create a new Group."),l.a.createElement(P.a,{id:"name",label:"Name",variant:"filled",fullWidth:!0,className:e.margin,onChange:this.handleChange("name"),error:this.state.nameError.length>0,helperText:this.state.nameError}),l.a.createElement(P.a,{id:"desc",label:"Description",variant:"filled",fullWidth:!0,className:e.margin,onChange:this.handleChange("description"),error:this.state.descriptionError.length>0,helperText:this.state.descriptionError})),l.a.createElement(U.a,null,l.a.createElement(R.a,{autoFocus:!0,onClick:this.handleClose(0),color:"secondary"},"Cancel"),l.a.createElement(R.a,{onClick:this.handleClose(1),color:"secondary",variant:"contained",autoFocus:!0,startIcon:l.a.createElement(G.a,null),style:{marginRight:16}},"Create"))))}}]),a}(l.a.Component),_=Object(F.a)((function(e){return{margin:{marginTop:e.spacing(1)}}}))(B),V=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(){var e;Object(r.a)(this,a);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).state={anchorEl:null,groupsRef:H.database().ref("groups"),groups:[]},e.setAnchorEl=function(t){e.setState({anchorEl:t})},e.handleMenu=function(t){e.setAnchorEl(t.currentTarget)},e.handleClose=function(t){return function(t){e.setAnchorEl(null)}},e.setInState=function(t,a){e.state;e.setState(Object(b.a)({},t,a))},e.addListeners=function(){var t=[];e.state.groupsRef.on("child_added",(function(a){t.push(a.val()),e.setInState("groups",t)})),console.log(t)},e.changeActiveChat=function(t){e.props.setCurrentChat(t)},e.displayGroups=function(t){return t.map((function(t){return l.a.createElement(v.a,{key:t.id},l.a.createElement(w.a,{onClick:function(){return e.changeActiveChat(t)},avatar:l.a.createElement(y.a,{"aria-label":"recipe"}),title:t.name,subheader:t.description}))}))},e}return Object(n.a)(a,[{key:"componentDidMount",value:function(){this.addListeners()}},{key:"componentWillUnmount",value:function(){this.state.groupsRef.off()}},{key:"render",value:function(){var e=this.props.currentUser;return l.a.createElement(O.a,{elevation:2,style:{height:"100%"}},l.a.createElement("div",null,e?l.a.createElement(w.a,{avatar:l.a.createElement(y.a,{"aria-label":"recipe",src:e.photoURL}),action:l.a.createElement(j.a,{"aria-label":"settings","aria-haspopup":"true",onClick:this.handleMenu},l.a.createElement(S.a,null)),title:e.displayName,subheader:e.email}):l.a.createElement(w.a,{avatar:l.a.createElement(y.a,{"aria-label":"recipe"},"R"),title:"Not Signed In",subheader:"...."})),l.a.createElement(C.a,{id:"menu-appbar",anchorEl:this.state.anchorEl,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:this.state.anchorEl,onClose:this.handleClose(0)},l.a.createElement(_,{closeDialog:this.handleClose(0),currentUser:e})),l.a.createElement("br",null),l.a.createElement(p.a,{variant:"h6"},"Your Chats"),this.displayGroups(this.state.groups))}}]),a}(l.a.Component),J=Object(d.b)(null,{setCurrentChat:function(e){return{type:"SET_CURRENT_CHAT",payload:{chat:e}}}})(V),Z=a(199),K=a(200),Y=a(190),Q=a(196),$=a(197),q=a(95),X=a.n(q),ee=a(96),te=a.n(ee),ae=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(){return Object(r.a)(this,a),t.apply(this,arguments)}return Object(n.a)(a,[{key:"render",value:function(){var e=this.props.classes;return l.a.createElement("div",{className:e.root},l.a.createElement(Q.a,{position:"static",className:e.color,disableGutters:!0},l.a.createElement($.a,{variant:"dense",disableGutters:!0},l.a.createElement(p.a,{variant:"h6",color:"inherit",className:e.title},this.props.chat?this.props.chat.name:"Chat Name"),l.a.createElement(j.a,null,l.a.createElement(X.a,null)),l.a.createElement(j.a,null,l.a.createElement(te.a,null)))))}}]),a}(l.a.Component),re=Object(F.a)((function(e){return{root:{},color:{backgroundColor:"dark"===e.palette.type?"#323232":"#e0e0e0",color:e.palette.text.primary,paddingLeft:8},title:{flexGrow:1}}}))(ae),ne=(a(133),a(198));function se(e){var t=8,a=8;return e.firstMessage&&(e.user?a=1:t=1),l.a.createElement("div",{style:{display:"flex"}},l.a.createElement(ne.a,Object.assign({},e,{style:{borderRadius:8,borderTopLeftRadius:t,borderTopRightRadius:a},variant:"outlined"}),e.showName?l.a.createElement(p.a,{variant:"body2",color:"textSecondary",style:{textAlign:e.user?"right":"left"}},e.message.user.name):null,l.a.createElement(p.a,{variant:"body1"},e.message.content)))}var oe=function(e){var t=!1,a=!1;return e.messages.map((function(r){return t=r.user.id!==a,a=r.user.id,r.user.id===e.userId?l.a.createElement(se,{className:"message user-message",message:r,showName:t,firstMessage:t,user:!0}):l.a.createElement(se,{className:"message",message:r,showName:t,firstMessage:t})}))};function ie(e){var t=e.children,a=e.window,r=Object(Z.a)({disableHysteresis:!0,threshold:0,target:a?a():void 0});return l.a.cloneElement(t,{elevation:r?4:0})}var le=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(){var e;Object(r.a)(this,a);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).state={messagesLoading:!0,messages:[]},e.addListeners=function(t){e.setState({messages:[],messagesLoading:!0}),e.addMessageListener(t)},e.componentDidUpdate=function(t){console.log(t),t.chat&&e.props.chat.id!==t.chat.id&&(e.removeListeners(t.chat.id),e.addListeners(e.props.chat.id))},e.removeListeners=function(t){e.props.messageRef.child(t).off()},e.addMessageListener=function(t){var a=[];console.log("Ading listener"),e.props.messageRef.child(t).on("child_added",(function(t){a.push(t.val()),console.log(a),e.setState({messages:a,messagesLoading:!1})}))},e}return Object(n.a)(a,[{key:"componentDidMount",value:function(){this.props.chat&&this.addListeners(this.props.chat.id)}},{key:"render",value:function(){var e=this.props.classes;return l.a.createElement(l.a.Fragment,null,l.a.createElement(ie,this.props,l.a.createElement(re,{chat:this.props.chat})),l.a.createElement(K.a,{style:{flexGrow:1,maxHeight:"77vh",margin:1,padding:0}},l.a.createElement(Y.a,{className:e.root,subheader:l.a.createElement("li",null)},l.a.createElement(oe,{messages:this.state.messages,userId:this.props.user.uid}))))}}]),a}(l.a.Component),ce=Object(F.a)((function(e){return{root:{width:"100%",height:"100%",padding:0,backgroundColor:e.palette.background.paper,position:"relative",overflow:"auto"},listSection:{backgroundColor:"inherit"},ul:{backgroundColor:"inherit",padding:0}}}))(le),ue=a(211),me=a(97),de=a.n(me),he=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(){var e;Object(r.a)(this,a);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).state={message:""},e.handleChange=function(t){e.setState(Object(b.a)({},t.target.name,t.target.value))},e.createMessage=function(){return{content:e.state.message,timestamp:H.database.ServerValue.TIMESTAMP,user:{id:e.props.user.uid,name:e.props.user.displayName,avatar:e.props.user.photoURL}}},e.submit=function(){e.state.message&&(e.props.messageRef.child(e.props.chatId).push().set(e.createMessage()),console.log(e.props.chatId));e.setState({message:""})},e}return Object(n.a)(a,[{key:"render",value:function(){var e=this.props.classes;return l.a.createElement("div",{className:e.root},l.a.createElement(f.a,{container:!0},l.a.createElement(f.a,{item:!0,xs:11},l.a.createElement(ue.a,{className:e.input+" "+e.centering,placeholder:"Type message here",multiline:!0,name:"message",value:this.state.message,onChange:this.handleChange,rowsMax:4})),l.a.createElement(f.a,{item:!0,xs:1},l.a.createElement(j.a,{onClick:this.submit},l.a.createElement(de.a,{className:e.icon,fontSize:"32"})))))}}]),a}(l.a.Component),pe=Object(F.a)((function(e){return{root:{backgroundColor:"dark"===e.palette.type?"#353535":"#e0e0e0",color:e.palette.text.primary,alignItems:"bottom"},icon:{verticalAlign:"bottom"},centering:{margin:"auto",width:"100%",height:"100%",padding:"8px"},input:{marginLeft:e.spacing(1),flex:1}}}))(he),ge=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(){var e;Object(r.a)(this,a);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).state={messageRef:H.database().ref("messages")},e}return Object(n.a)(a,[{key:"render",value:function(){return l.a.createElement(O.a,{elevation:2,style:{height:"100%",display:"flex",flexDirection:"column",flexWrap:"wrap"}},this.props.chat&&this.props.user?l.a.createElement(ce,{chat:this.props.chat,messageRef:this.state.messageRef,user:this.props.user}):null,l.a.createElement(pe,{chatId:this.props.chat?this.props.chat.id:"",user:this.props.user,messageRef:this.state.messageRef}))}}]),a}(l.a.Component),fe=Object(E.a)((function(e){return{root:{flexGrow:1},content:{height:"91vh"},container:{width:"100%",margin:0},item:{padding:6},paper:{padding:e.spacing(2),textAlign:"center",color:e.palette.text.secondary}}}));var Ee=Object(d.b)((function(e){return{currentUser:e.user.currentUser,currentChat:e.chat.chat}}))((function(e){var t=fe();return l.a.createElement("div",{className:t.root},l.a.createElement(f.a,{container:!0,direction:"row",justify:"space-around",className:t.container},l.a.createElement(f.a,{item:!0,xs:12,sm:4,className:t.content+" "+t.item},l.a.createElement(J,{currentUser:e.currentUser})),l.a.createElement(f.a,{item:!0,xs:12,sm:8,className:t.content+" "+t.item},l.a.createElement(ge,{chat:e.currentChat,user:e.currentUser}))))})),be=Object(E.a)((function(e){return{bg:{background:"dark"===e.palette.type?"#373737":"#fafafa"}}}));var ve=function(e){var t=be();return l.a.createElement("div",{className:"app "+t.bg},e.isLoading?l.a.createElement(g,{message:"Fetching your messages"}):l.a.createElement(Ee,null))},we=a(25),ye=a(188),Oe=a(213),je=a(212),Ce=a(203),ke=a(191),Se=a(204),xe=a(205),Ne=a(3),Me=a(73),Re=a.n(Me),Le=a(51),Ue=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).handleClickShowPassword=function(){n.setState({showPassword:!n.state.showPassword})},n.handleChange=function(e){return function(t){n.setState(Object(b.a)({},e,t.target.value))}},n.setMessage=function(e,t){n.setState(Object(b.a)({},e,t))},n.resetErrors=Object(M.a)(N.a.mark((function e(){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.setState({emailError:"",passwordError:""});case 2:case"end":return e.stop()}}),e)}))),n.isFormValid=function(){var e=!0;return 0===n.state.email.length&&(n.setMessage("emailError","Email field cannot be empty"),e=!1),n.state.password.length<6&&(n.setMessage("passwordError","Password must have atleast 6 characters"),e=!1),e},n.handleSubmit=function(){n.resetErrors().then((function(){n.isFormValid()&&(n.setState(Object(we.a)(Object(we.a)({},n.state),{},{loading:!0})),H.auth().signInWithEmailAndPassword(n.state.email,n.state.password).then((function(e){console.log(e),n.setState(Object(we.a)(Object(we.a)({},n.state),{},{loading:!1}))})).catch((function(e){console.error(e),e.message.toLowerCase().includes("email")?n.setMessage("emailError",e.message):e.message.toLowerCase().includes("password")&&n.setMessage("passwordError",e.message),n.setState(Object(we.a)(Object(we.a)({},n.state),{},{loading:!1}))})))}))},n.state={email:"",password:"",showPassword:!1,emailError:"",passwordError:"",loading:!1},n}return Object(n.a)(a,[{key:"render",value:function(){var e=this.props.classes;return l.a.createElement("div",{className:e.root+" app "+e.bg},l.a.createElement(f.a,{container:!0,justify:"center"},l.a.createElement(f.a,{item:!0,style:{maxWidth:550,textAlign:"center"}},l.a.createElement(O.a,{elevation:2,style:{padding:30,borderRadius:10,marginTop:"1em"}},l.a.createElement("img",{src:Re.a,alt:"logo",style:{margin:"auto"},width:"50%",height:"30%"}),l.a.createElement(p.a,{variant:"h5"},"Login to Messenger"),l.a.createElement("br",null),l.a.createElement(P.a,{className:Object(Ne.a)(e.margin,e.textField),error:this.state.emailError.length>0,helperText:this.state.emailError,id:"mail",label:"E-Mail",variant:"outlined",value:this.state.email,onChange:this.handleChange("email")}),l.a.createElement("br",null),l.a.createElement(ye.a,{error:this.state.passwordError.length>0,className:Object(Ne.a)(e.margin,e.textField),variant:"outlined"},l.a.createElement(Oe.a,{htmlFor:"outlined-adornment-password"},"Password"),l.a.createElement(je.a,{id:"outlined-adornment-password",type:this.state.showPassword?"text":"password",value:this.state.password,onChange:this.handleChange("password"),endAdornment:l.a.createElement(Ce.a,{position:"end"},l.a.createElement(j.a,{"aria-label":"toggle password visibility",onClick:this.handleClickShowPassword,edge:"end"},this.state.showPassword?l.a.createElement(Se.a,null):l.a.createElement(xe.a,null))),labelWidth:70}),l.a.createElement(ke.a,{id:"outlined-adornment-password"},this.state.passwordError)),l.a.createElement("br",null),this.state.loading?l.a.createElement(h.a,{color:"secondary",className:Object(Ne.a)(e.margin)}):l.a.createElement(R.a,{variant:"contained",color:"secondary",size:"large",onClick:this.handleSubmit,className:Object(Ne.a)(e.margin)},"LOGIN"),l.a.createElement("br",null),l.a.createElement(p.a,{variant:"body2",component:"p"},"Don't have an account? ",l.a.createElement(Le.b,{to:"/register",replace:!0,className:e.link},"Register"))))))}}]),a}(l.a.Component),Ae=Object(F.a)((function(e){return{root:{flexGrow:1},margin:{margin:e.spacing(1)},textField:{width:"38ch"},bg:{background:"dark"===e.palette.type?"#373737":"#fafafa"},link:{color:e.palette.secondary.main}}}))(Ue),Te=a(98),Ie=a.n(Te),Pe=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).handleClickShowPassword=function(){n.setState({showPassword:!n.state.showPassword})},n.handleChange=function(e){return function(t){n.setState(Object(b.a)({},e,t.target.value))}},n.setMessage=function(e,t){n.setState(Object(b.a)({},e,t))},n.resetErrors=Object(M.a)(N.a.mark((function e(){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.setState({nameError:"",emailError:"",passwordError:""});case 2:case"end":return e.stop()}}),e)}))),n.isFormValid=function(){var e=!0;return 0===n.state.name.length&&(n.setMessage("nameError","Name field cannot be empty"),e=!1),0===n.state.email.length&&(n.setMessage("emailError","Email field cannot be empty"),e=!1),n.state.password.length<6&&(n.setMessage("passwordError","Password must have atleast 6 characters"),e=!1),e},n.handleSubmit=function(){n.resetErrors().then((function(){n.isFormValid()&&(n.setState({loading:!0}),H.auth().createUserWithEmailAndPassword(n.state.email,n.state.password).then((function(e){console.log(e),e.user.updateProfile({displayName:n.state.name,photoURL:"http://gravatar.com/avatar/".concat(Ie()(e.user.email),"?d=identicon")}).then((function(){n.saveUser(e).then((function(){console.log("User saved!!"),n.setState({loading:!1})})).catch((function(e){console.error(e)}))})).catch((function(e){n.setState({loading:!1})}))})).catch((function(e){console.error(e),e.message.toLowerCase().includes("email")?n.setMessage("emailError",e.message):e.message.toLowerCase().includes("password")&&n.setMessage("passwordError",e.message),n.setState({loading:!1})})))}))},n.saveUser=function(e){return n.state.usersRef.child(e.user.uid).set({name:e.user.displayName,avatar:e.user.photoURL,email:e.user.email})},n.state={name:"",email:"",password:"",showPassword:!1,nameError:"",emailError:"",passwordError:"",loading:!1,usersRef:H.database().ref("users")},n}return Object(n.a)(a,[{key:"render",value:function(){var e=this.props.classes;return l.a.createElement("div",{className:e.root+" app "+e.bg},l.a.createElement(f.a,{container:!0,justify:"center"},l.a.createElement(f.a,{item:!0,style:{maxWidth:550,textAlign:"center"}},l.a.createElement(O.a,{elevation:2,style:{padding:30,borderRadius:10,margin:"1em"}},l.a.createElement("img",{src:Re.a,alt:"logo",style:{margin:"auto"},width:"50%",height:"30%"}),l.a.createElement(p.a,{variant:"h5"},"Register for Messenger"),l.a.createElement("br",null),l.a.createElement(P.a,{className:Object(Ne.a)(e.margin,e.textField),error:this.state.nameError.length>0,helperText:this.state.nameError,id:"name",label:"Name",variant:"outlined",value:this.state.name,onChange:this.handleChange("name")}),l.a.createElement("br",null),l.a.createElement(P.a,{className:Object(Ne.a)(e.margin,e.textField),error:this.state.emailError.length>0,helperText:this.state.emailError,id:"mail",label:"E-Mail",variant:"outlined",value:this.state.email,onChange:this.handleChange("email")}),l.a.createElement("br",null),l.a.createElement(ye.a,{error:this.state.passwordError.length>0,className:Object(Ne.a)(e.margin,e.textField),variant:"outlined"},l.a.createElement(Oe.a,{htmlFor:"outlined-adornment-password"},"Password"),l.a.createElement(je.a,{id:"outlined-adornment-password",type:this.state.showPassword?"text":"password",value:this.state.password,onChange:this.handleChange("password"),endAdornment:l.a.createElement(Ce.a,{position:"end"},l.a.createElement(j.a,{"aria-label":"toggle password visibility",onClick:this.handleClickShowPassword,edge:"end"},this.state.showPassword?l.a.createElement(Se.a,null):l.a.createElement(xe.a,null))),labelWidth:70}),l.a.createElement(ke.a,{id:"outlined-adornment-password"},this.state.passwordError)),l.a.createElement("br",null),this.state.loading?l.a.createElement(h.a,{color:"secondary",className:Object(Ne.a)(e.margin)}):l.a.createElement(R.a,{variant:"contained",color:"secondary",size:"large",onClick:this.handleSubmit,className:Object(Ne.a)(e.margin)},"REGISTER"),l.a.createElement("br",null),l.a.createElement(p.a,{variant:"body2",component:"p"},"Already a User? ",l.a.createElement(Le.b,{to:"/login",replace:!0,className:e.link},"Login"))))))}}]),a}(l.a.Component),Fe=Object(F.a)((function(e){return{root:{flexGrow:1},margin:{margin:e.spacing(1)},textField:{width:"38ch"},bg:{background:"dark"===e.palette.type?"#373737":"#fafafa"},link:{color:e.palette.secondary.main}}}))(Pe),De=a(101),Ge=a(215),We=a(99),ze=a.n(We),He=Object(E.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1}}})),Be=function(e){var t=l.a.useState(null),a=Object(De.a)(t,2),r=a[0],n=a[1],s=Boolean(r),o=He(),i=function(t){return function(a){n(null),3===t?c():2===t&&e.toggleDarkMode()}},c=function(){H.auth().signOut().then((function(){console.log("Signed out")}))};return l.a.createElement("div",{className:o.root},l.a.createElement(Q.a,{position:"static"},l.a.createElement($.a,null,l.a.createElement(j.a,{edge:"start",className:o.menuButton,color:"inherit","aria-label":"menu"},l.a.createElement(ze.a,null)),l.a.createElement(p.a,{variant:"h6",className:o.title},"Messenger"),l.a.createElement(j.a,{"aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",onClick:function(e){n(e.currentTarget)},color:"inherit"},l.a.createElement(S.a,null)),l.a.createElement(C.a,{id:"menu-appbar",anchorEl:r,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:s,onClose:i(0)},l.a.createElement(Ge.a,{onClick:i(2)},"Toggle Dark Mode"),e.user?l.a.createElement(Ge.a,{onClick:i(3)},"Logout"):null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var _e=a(13),Ve=a(100),Je=a(206),Ze=a(209),Ke={currentUser:null,isLoading:!0},Ye={chat:null},Qe=Object(m.b)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ke,t=arguments.length>1?arguments[1]:void 0;switch(console.log(t),t.type){case"SET_USER":return{currentUser:t.payload.createdUser,isLoading:!1};case"CLEAR_USER":return Object(we.a)(Object(we.a)({},Ke),{},{isLoading:!1});default:return e}},chat:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ye,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CURRENT_CHAT":return Object(we.a)(Object(we.a)({},e),{},{chat:t.payload.chat});default:return e}}}),$e=Object(Ve.a)({palette:{primary:{main:"#1976d2"},secondary:{main:"#ff6f00"}}}),qe=Object(Ve.a)({palette:{type:"dark",primary:{main:"#1976d2"},secondary:{main:"#ff6f00"}}}),Xe=Object(m.c)(Qe),et=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(){var e;Object(r.a)(this,a);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).state={message:"",darkMode:!1},e}return Object(n.a)(a,[{key:"showSnackbarMessage",value:function(e){this.setState({message:e})}},{key:"toggleDarkMode",value:function(){this.setState({darkMode:!this.state.darkMode})}},{key:"componentDidMount",value:function(){var e=this;H.auth().onAuthStateChanged((function(t){t?(e.showSnackbarMessage("Logged in as "+t.displayName),e.props.history.replace("/"),e.props.setUser(t)):(e.props.history.replace("/login"),e.props.clearUser())}))}},{key:"render",value:function(){var e=this;return l.a.createElement(Je.a,{theme:this.state.darkMode?qe:$e},l.a.createElement(l.a.Fragment,null,l.a.createElement(Be,{user:this.props.currentUser,toggleDarkMode:function(){return e.toggleDarkMode()}}),l.a.createElement(_e.c,null,l.a.createElement(_e.a,{exact:!0,path:"/",component:function(){return l.a.createElement(ve,{isLoading:e.props.isLoading,user:e.props.currentUser})}}),l.a.createElement(_e.a,{path:"/login",component:Ae}),l.a.createElement(_e.a,{path:"/register",component:Fe})),l.a.createElement(Ze.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:this.state.message.length>0,autoHideDuration:1e3,onClose:function(){e.setState({message:""})},message:this.state.message})))}}]),a}(l.a.Component),tt=Object(_e.f)(Object(d.b)((function(e){return{isLoading:e.user.isLoading,currentUser:e.user.currentUser}}),{setUser:function(e){return{type:"SET_USER",payload:{createdUser:e}}},clearUser:function(){return{type:"CLEAR_USER"}}})(et));u.a.render(l.a.createElement(d.a,{store:Xe},l.a.createElement(Le.a,null,l.a.createElement(tt,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},73:function(e,t,a){e.exports=a.p+"static/media/logo.5d5d9eef.svg"}},[[111,1,2]]]);
//# sourceMappingURL=main.7c918174.chunk.js.map